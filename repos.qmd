---
title: "My Portfolio"
---

```{=html}
<style>
  .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1rem; }
  .card { border: 1px solid #e5e7eb; border-radius: 14px; padding: 1rem; background: #fff; }
  .card h3 { margin: 0 0 .25rem 0; }
  .muted { color: #6b7280; font-size: .95rem; }
  .btns { display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.75rem; }
  .btn { display:inline-block; padding:.45rem .7rem; border-radius: 10px; border: 1px solid #d1d5db; text-decoration:none; }
  .btn.primary { border-color:#111827; }
  .table-wrap { overflow:auto; border:1px solid #e5e7eb; border-radius:14px; }
  table { border-collapse: collapse; width:100%; font-size:.95rem; }
  th, td { border-bottom: 1px solid #eee; padding: .5rem .6rem; text-align:left; }
  th { position: sticky; top: 0; background: #fafafa; }
  code { font-size: .95em; }
</style>

<h2>Featured work</h2>
<div id="featured" class="grid"></div>

<h2 style="margin-top:2rem;">Pandas notebooks</h2>
<p class="muted">All <code>.ipynb</code> notebooks from <code>pandas</code> repo, with View + Run.</p>
<div id="pandas" class="grid"></div>

<h2 style="margin-top:2rem;">API integrations (Python)</h2>
<p class="muted">All <code>.py</code> files from <code>api_integrations</code> repo, with View + Run.</p>
<div id="api" class="grid"></div>

<h2 style="margin-top:2rem;">Latest weather data</h2>
<p class="muted">Newest JSON from <code>weather_data_pipeline/data/weather</code>, shown as a table.</p>
<div id="weather-meta" class="muted"></div>
<div class="table-wrap" id="weather-table"></div>

<script>
  const GH = "https://github.com";
  const NBVIEW = "https://nbviewer.org/github";
  const BINDER = "https://mybinder.org/v2/gh";

  // ---- helpers ----
  const el = (tag, attrs={}, html="") => {
    const n = document.createElement(tag);
    Object.entries(attrs).forEach(([k,v]) => n.setAttribute(k, v));
    n.innerHTML = html;
    return n;
  };

  function card({title, subtitle, links}) {
    const wrap = el("div", {class:"card"});
    wrap.appendChild(el("h3", {}, title));
    if (subtitle) wrap.appendChild(el("div", {class:"muted"}, subtitle));
    const btns = el("div", {class:"btns"});
    links.forEach(l => btns.appendChild(el("a", {class:`btn ${l.primary ? "primary":""}`, href:l.href, target:"_blank", rel:"noopener"}, l.text)));
    wrap.appendChild(btns);
    return wrap;
  }

  async function ghJson(url) {
    const r = await fetch(url, {headers: {"Accept":"application/vnd.github+json"}});
    if (!r.ok) throw new Error(`GitHub API error ${r.status} for ${url}`);
    return await r.json();
  }

  // Git Trees API (recursive) to list all files in a repo
  // Docs: /repos/{owner}/{repo}/git/trees/{sha}?recursive=1
  async function listFilesRecursive(owner, repo) {
    const repoMeta = await ghJson(`https://api.github.com/repos/${owner}/${repo}`);
    const branch = repoMeta.default_branch;
    const branchMeta = await ghJson(`https://api.github.com/repos/${owner}/${repo}/branches/${branch}`);
    const treeSha = branchMeta.commit.commit.tree.sha;
    const tree = await ghJson(`https://api.github.com/repos/${owner}/${repo}/git/trees/${treeSha}?recursive=1`);
    return { branch, files: (tree.tree || []).filter(x => x.type === "blob").map(x => x.path) };
  }

  // Flatten JSON for table display (best-effort)
  function flatten(obj, prefix="") {
    const out = {};
    if (obj === null || obj === undefined) return out;
    if (typeof obj !== "object") { out[prefix || "value"] = obj; return out; }
    if (Array.isArray(obj)) {
      obj.forEach((v,i) => Object.assign(out, flatten(v, `${prefix}[${i}]`)));
      return out;
    }
    Object.entries(obj).forEach(([k,v]) => {
      const key = prefix ? `${prefix}.${k}` : k;
      if (v && typeof v === "object") Object.assign(out, flatten(v, key));
      else out[key] = v;
    });
    return out;
  }

  function renderTableFromJson(data, mount) {
    // If it's an array of objects, show as rows; else show a 2-col key/value table
    if (Array.isArray(data) && data.length && typeof data[0] === "object") {
      const rows = data.map(d => flatten(d));
      const cols = Array.from(new Set(rows.flatMap(r => Object.keys(r))));

      const table = el("table");
      const thead = el("thead");
      const trh = el("tr");
      cols.forEach(c => trh.appendChild(el("th", {}, c)));
      thead.appendChild(trh);
      table.appendChild(thead);

      const tbody = el("tbody");
      rows.forEach(r => {
        const tr = el("tr");
        cols.forEach(c => tr.appendChild(el("td", {}, (r[c] ?? "").toString())));
        tbody.appendChild(tr);
      });
      table.appendChild(tbody);
      mount.innerHTML = "";
      mount.appendChild(table);
      return;
    }

    const flat = flatten(data);
    const table = el("table");
    table.appendChild(el("thead", {}, "<tr><th>Field</th><th>Value</th></tr>"));
    const tbody = el("tbody");
    Object.entries(flat).forEach(([k,v]) => {
      const tr = el("tr");
      tr.appendChild(el("td", {}, k));
      tr.appendChild(el("td", {}, (v ?? "").toString()));
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);
    mount.innerHTML = "";
    mount.appendChild(table);
  }

  // ---- Featured items (your exact picks) ----
  const featuredItems = [
    { repo:"rohlik_project",   path:"project.ipynb",              title:"Rohlik Project",      subtitle:"Notebook: project.ipynb" },
    { repo:"iris_project",     path:"iris_analysis.ipynb",        title:"Iris Analysis",       subtitle:"Notebook: iris_analysis.ipynb" },
    { repo:"penguins_project", path:"penguins.ipynb",             title:"Penguins",            subtitle:"Notebook: penguins.ipynb" },
    { repo:"applied_statistics", path:"problems.ipynb",           title:"Applied Statistics",  subtitle:"Notebook: problems.ipynb" },
    { repo:null, path:null, title:"Live App", subtitle:"Deployed on PythonAnywhere", external:"https://luciamacakova.pythonanywhere.com" }
  ];

  function notebookLinks(owner, repo, branch, path) {
    const view = `${NBVIEW}/${owner}/${repo}/blob/${branch}/${path}`;
    const run  = `${BINDER}/${owner}/${repo}/${branch}?filepath=${encodeURIComponent(path)}`;
    const gh   = `${GH}/${owner}/${repo}/blob/${branch}/${path}`;
    return [
      {text:"View (nbviewer)", href:view, primary:true},
      {text:"Run (Binder)", href:run},
      {text:"Source (GitHub)", href:gh}
    ];
  }

  function scriptLinks(owner, repo, branch, path) {
    const run = `${BINDER}/${owner}/${repo}/${branch}?urlpath=lab/tree/${encodeURIComponent(path)}`;
    const gh  = `${GH}/${owner}/${repo}/blob/${branch}/${path}`;
    return [
      {text:"Run (Binder)", href:run, primary:true},
      {text:"Source (GitHub)", href:gh}
    ];
  }

  async function renderFeatured() {
    const mount = document.getElementById("featured");
    for (const item of featuredItems) {
      if (item.external) {
        mount.appendChild(card({
          title: item.title,
          subtitle: item.subtitle,
          links: [{text:"Open app", href:item.external, primary:true}]
        }));
        continue;
      }
      // assume main branch; if yours differ, trees listing below uses default branch anyway
      const repoMeta = await ghJson(`https://api.github.com/repos/lmacakova/${item.repo}`);
      const branch = repoMeta.default_branch;
      mount.appendChild(card({
        title: item.title,
        subtitle: item.subtitle,
        links: notebookLinks("lmacakova", item.repo, branch, item.path)
      }));
    }
  }

  // ---- Pandas notebooks (all .ipynb) ----
  async function renderRepoNotebooks(repo, mountId) {
    const mount = document.getElementById(mountId);
    const {branch, files} = await listFilesRecursive("lmacakova", repo);
    const notebooks = files.filter(p => p.toLowerCase().endsWith(".ipynb"));
    if (!notebooks.length) {
      mount.appendChild(el("div", {class:"muted"}, "No notebooks found."));
      return;
    }
    notebooks.sort((a,b) => a.localeCompare(b));
    notebooks.forEach(path => {
      mount.appendChild(card({
        title: path.split("/").pop(),
        subtitle: `${repo}/${path}`,
        links: notebookLinks("lmacakova", repo, branch, path)
      }));
    });
  }

  // ---- API integrations scripts (all .py) ----
  async function renderRepoScripts(repo, mountId) {
    const mount = document.getElementById(mountId);
    const {branch, files} = await listFilesRecursive("lmacakova", repo);
    const scripts = files.filter(p => p.toLowerCase().endsWith(".py"));
    if (!scripts.length) {
      mount.appendChild(el("div", {class:"muted"}, "No Python files found."));
      return;
    }
    scripts.sort((a,b) => a.localeCompare(b));
    scripts.forEach(path => {
      mount.appendChild(card({
        title: path.split("/").pop(),
        subtitle: `${repo}/${path}`,
        links: scriptLinks("lmacakova", repo, branch, path)
      }));
    });
  }

  // ---- Weather JSON (newest in folder) ----
  async function renderLatestWeatherJson() {
    const meta = document.getElementById("weather-meta");
    const tableMount = document.getElementById("weather-table");

    const folder = await ghJson("https://api.github.com/repos/lmacakova/weather_data_pipeline/contents/data/weather");
    const jsonFiles = folder
      .filter(x => x.type === "file" && x.name.toLowerCase().endsWith(".json"))
      // heuristic: newest by filename (works well if you use timestamps in names)
      .sort((a,b) => b.name.localeCompare(a.name));

    if (!jsonFiles.length) {
      meta.textContent = "No JSON files found in data/weather.";
      return;
    }

    const newest = jsonFiles[0];
    meta.innerHTML = `Showing: <code>${newest.name}</code> &nbsp;Â·&nbsp; <a href="${newest.html_url}" target="_blank" rel="noopener">source</a>`;
    const data = await (await fetch(newest.download_url)).json();
    renderTableFromJson(data, tableMount);
  }

  // ---- run everything ----
  (async function init() {
    try {
      await renderFeatured();
      await renderRepoNotebooks("pandas", "pandas");
      await renderRepoScripts("api_integrations", "api");
      await renderLatestWeatherJson();
    } catch (e) {
      console.error(e);
      const m = document.createElement("p");
      m.className = "muted";
      m.textContent = "Something failed to load (likely a GitHub API rate limit). Please refresh.";
      document.body.appendChild(m);
    }
  })();
</script>


